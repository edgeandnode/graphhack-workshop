(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{8825:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[project]",function(){return r(97254)}])},97254:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(35810),o=r(6343),i=r(52159);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e){var t=e.size,r=e.children,o=l(e,["size","children"]);return(0,n.tZ)("svg",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){c(e,t,r[t])}))}return e}({width:t,height:t},o,{children:r}))}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e){var t=e.direction,r=d(e,["direction"]);return(0,n.tZ)(a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){u(e,t,r[t])}))}return e}({},r,{sx:"up"===t?{}:{transform:"rotate(180deg) translateY(-2px)"},children:(0,n.tZ)("path",{d:"M3.65625 7.875H0.84375C0.351562 7.875 0 8.26172 0 8.71875V17.1562C0 17.6484 0.351562 18 0.84375 18H3.65625C4.11328 18 4.5 17.6484 4.5 17.1562V8.71875C4.5 8.26172 4.11328 7.875 3.65625 7.875ZM2.25 16.5938C1.75781 16.5938 1.40625 16.2422 1.40625 15.75C1.40625 15.293 1.75781 14.9062 2.25 14.9062C2.70703 14.9062 3.09375 15.293 3.09375 15.75C3.09375 16.2422 2.70703 16.5938 2.25 16.5938ZM13.5 2.88281C13.5 0.28125 11.8125 0 10.9688 0C10.2305 0 9.91406 1.40625 9.77344 2.03906C9.5625 2.8125 9.38672 3.58594 8.85938 4.11328C7.73438 5.27344 7.13672 6.71484 5.73047 8.08594C5.66016 8.19141 5.625 8.29688 5.625 8.40234V15.9258C5.625 16.1367 5.80078 16.3125 6.01172 16.3477C6.57422 16.3477 7.3125 16.6641 7.875 16.9102C9 17.4023 10.3711 18 12.0586 18H12.1641C13.6758 18 15.4688 18 16.1719 16.9805C16.4883 16.5586 16.5586 16.0312 16.3828 15.3984C16.9805 14.8008 17.2617 13.6758 16.9805 12.7617C17.5781 11.9531 17.6484 10.793 17.2969 9.98438C17.7188 9.5625 18 8.89453 17.9648 8.26172C17.9648 7.17188 17.0508 6.1875 15.8906 6.1875H12.3047C12.5859 5.20312 13.5 4.35938 13.5 2.88281Z",fill:"currentColor"})}))}var f=r(92826),p=r(55063),b=r(42038);var h=r(7997),v=r(51323);var g=r(57744),m=r.n(g),y=r(28575);function w(e,t,r,n,o,i,c){try{var l=e[i](c),a=l.value}catch(u){return void r(u)}l.done?t(a):Promise.resolve(a).then(n,o)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){O(e,t,r[t])}))}return e}function x(e,t){return r=m().mark((function r(){var n,o,i;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("https://gateway.testnet.thegraph.com/api/5ee2fbe7857f644cfa10ca67e3147a7d/subgraphs/id/EeYwFoxxSgtR1gRhejSDp9sCujDvedcbLGLDH4rucfoW",j({method:"POST"},{headers:{"Content-Type":"application/json"}},{body:JSON.stringify({query:e,variables:t})}));case 2:return n=r.sent,r.next=5,n.json();case 5:if(!(o=r.sent).errors){r.next=9;break}throw i=o.errors[0].message,new Error(i);case 9:return r.abrupt("return",o.data);case 10:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function c(e){w(i,n,o,c,l,"next",e)}function l(e){w(i,n,o,c,l,"throw",e)}c(void 0)}))};var r}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){C(e,t,r[t])}))}return e}var S=function(){var e,t,r,c,l=(0,o.useRouter)().query,a=String(l.project),u=(r={id:a},(0,y.useQuery)(["Project",r],x("\n    query Project($id: ID!) {\n  project(id: $id) {\n    name\n    imageUrl\n    subtitle\n    description\n    createdAt\n    upvotes\n    downvotes\n    owner {\n      id\n    }\n    votes {\n      user {\n        id\n      }\n      vote\n      timestamp\n    }\n  }\n}\n    ",r),c)),d=u.data,s=u.error,f=null===d||void 0===d?void 0:d.project;return d&&null===f?(0,n.tZ)(X,{heading:"Project Not Found"}):s?(0,n.tZ)(X,{heading:"Something went wrong",children:(0,n.tZ)("pre",{sx:{color:"critical"},children:s.toString()})}):(0,n.BX)(X,{heading:(null===f||void 0===f?void 0:f.name)||"Loading...",subheading:null===f||void 0===f?void 0:f.subtitle,children:[(0,n.tZ)("img",{width:"100%",alt:"",role:"presentation",src:null===f||void 0===f?void 0:f.imageUrl,sx:{height:"304px",objectFit:"cover"}}),(0,n.BX)("section",{sx:{py:"2rem",display:"flex",flexDirection:"row",gap:"2rem"},children:[(0,n.BX)("div",{children:[(0,n.tZ)(i.X,{as:"h2",sx:{fontSize:"xl"},children:"Project Description"}),(0,n.tZ)("p",{sx:{lineHeight:1.8,fontWeight:400,mt:"0.5rem"},children:null===f||void 0===f?void 0:f.description})]}),(0,n.BX)("dl",{sx:{ml:"auto","> div":{display:"flex",justifyContent:"space-between"},dt:{pr:"1rem"}},children:[(0,n.BX)("div",{children:[(0,n.tZ)("dt",{sx:{color:"neutral.64"},children:"Created At"}),(0,n.tZ)("dt",{children:(null===f||void 0===f?void 0:f.createdAt)&&new Date(1e3*Number(f.createdAt)).toLocaleDateString("en-GB",{dateStyle:"long"})})]}),(0,n.BX)("div",{children:[(0,n.tZ)("dt",{sx:{color:"neutral.64"},children:"Owner"}),(0,n.tZ)("dt",{children:(null===f||void 0===f||null===(e=f.owner)||void 0===e?void 0:e.id)&&(0,n.tZ)("a",{href:"https://rinkeby.etherscan.io/address/".concat(null===f||void 0===f||null===(t=f.owner)||void 0===t?void 0:t.id),target:"__blank",sx:{cursor:"pointer",textDecoration:"underline",textDecorationColor:"primary.64",borderRadius:"4px",p:"0.125rem 0.25rem",m:"-0.125rem -0.25rem",textAlign:"center",fontSize:"0.875rem",":hover, :focus-visible":{backgroundColor:"primary.08"}},children:f.owner.id})})]})]})]}),f&&(0,n.tZ)(D,{project:f,projectId:a})]})},Z={lineHeight:1,display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem",p:"0.5rem 1rem",borderRadius:"8px","&:not(:disabled):hover, &:not(:disabled):focus-visible":{backgroundColor:"primary.08"}},k={fontWeight:700,fontSize:"lg",letterSpacing:"-0.4px"};function D(e){var t,r=e.project,o=e.projectId,i=function(e){var t,r=(0,b.mA)(),n=p[4].S.L,o=null===(t=r.data)||void 0===t?void 0:t.address,i=[e,o],c=(0,b.do)({addressOrName:n,contractInterface:f.l.abi},"getProjectVote",{args:i,enabled:!!o}),l=c.data,a=c.error;if(a)throw a;return l}(o),c=(t=r.name||"",(0,v.m)("vote",{description:function(e,r){return h.O$.from(r).eq(1)?'Upvote "'.concat(t,'"'):'Downvote "'.concat(t,'"')}})),l=1===i,a=2===i,u=!(0===i)||c.isLoading;return(0,n.BX)("section",{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,n.BX)("button",{title:"Upvote",sx:P({},Z,{color:l?"primary":"neutral.64"}),disabled:u,onClick:function(){return c.write(o,1)},children:[(0,n.tZ)("span",{sx:k,children:r.upvotes}),(0,n.tZ)(s,{direction:"up",size:"18","aria-label":"Upvotes"}),l&&(0,n.tZ)("span",{})]}),(0,n.BX)("button",{title:"Downvote",sx:P({},Z,{color:a?"primary":"neutral.32"}),disabled:u,onClick:function(){return c.write(o,2)},children:[(0,n.tZ)("span",{sx:k,children:r.downvotes}),(0,n.tZ)(s,{direction:"down",size:"18","aria-label":"Downvotes"})]}),c.isLoading&&(0,n.tZ)("p",{sx:{fontSize:"lg",color:"neutral.88",ml:"0.5rem",fontStyle:"italic"},children:"Voting..."})]})}function X(e){var t=e.heading,r=e.subheading,o=e.children;return(0,n.BX)("main",{sx:{px:"1rem",maxWidth:"$container",mx:"auto"},children:[(0,n.BX)("header",{sx:{pb:"2rem"},children:[(0,n.tZ)(i.X,{children:t}),(0,n.tZ)("p",{sx:{height:"1.5rem"},children:r})]}),o]})}},6343:function(e,t,r){e.exports=r(26406)}},function(e){e.O(0,[309,623,774,888,179],(function(){return t=8825,e(e.s=t);var t}));var t=e.O();_N_E=t}]);